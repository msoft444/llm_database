---
source_pdf: rp2350-datasheet-10.pdf
repository: llm_database
chapter: Chapter 3. Processor subsystem
section: 3.8.5. Debug
pages: 286-287
type: technical_spec
generated_at: 2026-03-01T12:20:14.494106+00:00
---

# 3.8.5. Debug

3.8.5. Debug

RISC-V debug specification

Hazard3 implements version 0.13.2 of the RISC-V External Debug Support specification, available at:

riscv.org/wp-content/uploads/2019/03/riscv-debug-release.pdf

RP2350 implements a single RISC-V Debug Module, which enables debug access to the two Hazard3 processor

instances. Hazard3 should be supported by any debug translator implementing version 0.13.2 of the RISC-V External

Debug Support specification, but some details of its implementation-defined behaviour are described here for

completeness. The Debug Module source code, available in the Hazard3 repository, can be consulted to answer more

detailed questions about the debug implementation.

As configured on RP2350, Hazard3 supports the following standard RISC-V debug features:

• Run/halt/reset control of each processor
• Halt-on-reset support for all processors
• Hart array mask register, for halting/resuming multiple processors simultaneously
• Abstract access to GPRs
• Program Buffer: 2 words with an implicit ebreak (impebreak)
• Automatic trigger of abstract commands (abstractauto)
• System Bus Access, arbitrated with core 1’s load/store port
• An instruction address trigger unit with four hardware breakpoints

3.8.5.1. Accessing the Debug Module

The Debug Module is accessed through a CoreSight APB-AP, which can be accessed in one of two ways:

• Externally, through the system’s SW-DP (see Section 3.5)
• Internally, via self-hosted debug (see Section 3.5.6)

The APB-AP for the Debug Module is located at offset 0xa000 in the debug address space. The Debug Module starts at

address 0 in the APB-AP’s downstream address space. The Debug Module addresses registers in increments of four

bytes, as APB is byte-addressed rather than word-addressed. This means the Debug Module register addresses listed in

the RISC-V debug specification must be multiplied by four.

3.8. Hazard3 processor
285

RP2350 Datasheet

3.8.5.2. Harts

Each Hazard3 core possesses exactly one hardware thread, or hart. This means each processor executes only a single

stream of instructions at a time. The two Hazard3 processor cores on RP2350, core 0 and 1, have hart IDs of 0 and 1

respectively. These values can be read from the MHARTID register on each processor, and match the values read from

the CPUID register in SIO.

The dmcontrol.hartsel field in RP2350’s Debug Module supports writing the values 0 and 1 only (it implements only a

single writable bit), and these correspond to hart IDs 0 and 1, which execute on core 0 and core 1 respectively.

3.8.5.3. Resets

The dmcontrol.hartreset field resets the selected cores only. This can be a single core selected by dmcontrol.hartsel, or

multiple cores selected by the hart array mask. It does not reset cores that are not selected, nor does it reset any other

system hardware. There is a one-to-one correspondence between harts and cores on this system.

The dmcontrol.ndmreset field resets both cores. It does not reset any other hardware. As per the specification: "Exactly

what is affected by this reset is implementation dependent, as long as it is possible to debug programs from the first

instruction executed."

3.8.5.4. Implementation-defined behaviour

The following are not implemented:

• Abstract access memory
• Abstract access CSR
• Post-incrementing abstract access GPR

The core behaves as follows:

• Branch, jal, jalr and auipc are illegal in Debug mode, because they observe PC: attempting to execute will halt

Program Buffer execution and report an exception in abstractcs.cmderr
• The dret instruction is not implemented (a special purpose DM-to-core signal is used to signal resume)
• The dscratch CSRs are not implemented
• The Debug Module’s data0 register is mapped into the core as a CSR, DMDATA0
• dcsr.stepie is hardwired to 0 (no interrupts during single stepping)
• dcsr.stopcount and dcsr.stoptime are hardwired to 1 (no counter or internal timer increment in Debug mode)
• dcsr.mprven is hardwired to 0
• dcsr.prv accepts only the values 3 (M-mode) and 0 (U-mode), rounding to nearest on write

For more details on the core-side Debug mode registers, see DCSR and DPC.

The trigger unit implements four exact instruction address match triggers. Triggers can be configured to trap to M-

mode as well as Debug-mode, meaning M-mode can use triggers for self-hosted hardware breakpoint support. The

tcontrol.mte and tcontrol.mpte fields are implemented to avoid infinite exception loops when an M-mode trigger is set on

the M-mode exception handler.
