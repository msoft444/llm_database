---
source_pdf: rp2350-datasheet-1.pdf
repository: llm_database
chapter: Chapter 3. Processor subsystem
section: 3.8.5. Debug
pages: 286-286
type: technical_spec
generated_at: 2026-02-28T17:22:56.644477+00:00
---

# 3.8.5. Debug

3.8.4.2.2. Interrupt calling convention
The default SDK hardware_irq library expects function pointers registered for system-level IRQs to be normal C functions.
There must be no 
__attribute__((interrupt)) on an interrupt handler passed into functions such as
set_exclusive_irq_handler(). This is an API detail that is consistent across all architectures supported by the SDK. Using
regular C calling convention is also efficient under heavy interrupt load, because the cost of saving/restoring all caller
save and temporary registers can be amortised over multiple interrupt handlers due to tail sharing, and a save triggered
by a low-priority IRQ can be taken over by a high-priority IRQ that asserted during the save.
Conversely, 
handlers 
registered 
for 
the 
standard 
RISC-V 
mtip 
and 
msip 
interrupts 
via 
the 
SDK
irq_set_riscv_vector_handler() function must be __attribute__((interrupt)). In terms of the generated code, this means
they should use save-as-you-go calling convention, and end with an mret. These interrupts are entered directly by the
hardware without any intermediate dispatch code.
As software is responsible for the dispatch to individual system interrupt handlers from the meip vector, it is possible to
support other interrupt calling conventions by supplying a different implementation for the dispatch.
3.8.5. Debug
RISC-V debug specification
Hazard3 implements version 0.13.2 of the RISC-V External Debug Support specification, available at:
riscv.org/wp-content/uploads/2019/03/riscv-debug-release.pdf
RP2350 implements a single RISC-V Debug Module, which enables debug access to the two Hazard3 processor
instances. Hazard3 should be supported by any debug translator implementing version 0.13.2 of the RISC-V External
Debug Support specification, but some details of its implementation-defined behaviour are described here for
completeness. The Debug Module source code, available in the Hazard3 repository, can be consulted to answer more
detailed questions about the debug implementation.
As configured on RP2350, Hazard3 supports the following standard RISC-V debug features:
• Run/halt/reset control of each processor
• Halt-on-reset support for all processors
• Hart array mask register, for halting/resuming multiple processors simultaneously
• Abstract access to GPRs
• Program Buffer: 2 words with an implicit ebreak (impebreak)
• Automatic trigger of abstract commands (abstractauto)
• System Bus Access, arbitrated with core 1’s load/store port
• An instruction address trigger unit with four hardware breakpoints
3.8.5.1. Accessing the Debug Module
The Debug Module is accessed through a CoreSight APB-AP, which can be accessed in one of two ways:
• Externally, through the system’s SW-DP (see Section 3.5)
• Internally, via self-hosted debug (see Section 3.5.6)
The APB-AP for the Debug Module is located at offset 0xa000 in the debug address space. The Debug Module starts at
address 0 in the APB-AP’s downstream address space. The Debug Module addresses registers in increments of four
bytes, as APB is byte-addressed rather than word-addressed. This means the Debug Module register addresses listed in
the RISC-V debug specification must be multiplied by four.
RP2350 Datasheet
3.8. Hazard3 processor
285

